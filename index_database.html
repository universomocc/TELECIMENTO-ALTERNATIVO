<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TELECIMENTO - Avalia√ß√£o de Satisfa√ß√£o</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="dark-theme">
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>TELECIMENTO</h1>
                <span class="tagline">Excel√™ncia em Constru√ß√£o</span>
            </div>
            <button class="admin-btn" onclick="openAdminPage()">
                <span>üë§</span> Administrador
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Hero Section -->
            <section class="hero">
                <h2 class="hero-title">Avalie Nossa Empresa</h2>
                <p class="hero-subtitle">Sua opini√£o √© fundamental para nosso crescimento</p>
            </section>

            <!-- Evaluation Form -->
            <section class="evaluation-section">
                <form class="evaluation-form" id="evaluationForm">
                    <div class="sectors-vertical">
                        <!-- Setor Geral -->
                        <div class="sector-card">
                            <h3 class="sector-title">Setor Geral da Empresa</h3>
                            <div class="rating-options">
                                <label class="rating-option">
                                    <input type="radio" name="geral" value="pessimo">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <circle cx="32" cy="32" r="30" fill="#ff4444"/>
                                            <circle cx="32" cy="32" r="28" fill="#ff5555"/>
                                            <path d="M20 20 Q24 16 28 20" stroke="#cc0000" stroke-width="3" fill="none"/>
                                            <path d="M36 20 Q40 16 44 20" stroke="#cc0000" stroke-width="3" fill="none"/>
                                            <path d="M20 44 Q32 36 44 44" stroke="#cc0000" stroke-width="3" fill="none"/>
                                            <circle cx="18" cy="18" r="4" fill="#ff6666"/>
                                            <circle cx="46" cy="18" r="4" fill="#ff6666"/>
                                        </svg>
                                    </div>
                                    <span class="label">P√©ssimo</span>
                                </label>
                                <label class="rating-option">
                                    <input type="radio" name="geral" value="regular">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <circle cx="32" cy="32" r="30" fill="#ffaa00"/>
                                            <circle cx="32" cy="32" r="28" fill="#ffbb11"/>
                                            <path d="M20 20 Q24 16 28 20" stroke="#cc7700" stroke-width="2" fill="none"/>
                                            <path d="M36 20 Q40 16 44 20" stroke="#cc7700" stroke-width="2" fill="none"/>
                                            <path d="M22 40 L42 40" stroke="#cc7700" stroke-width="3" fill="none"/>
                                            <path d="M16 50 Q20 46 24 50" stroke="#dd8800" stroke-width="2" fill="none"/>
                                        </svg>
                                    </div>
                                    <span class="label">Regular</span>
                                </label>
                                <label class="rating-option">
                                    <input type="radio" name="geral" value="bom">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <path d="M8 32 Q12 28 16 32 L24 40 L48 16 Q52 12 56 16 Q60 20 56 24 L28 52 Q24 56 20 52 L8 40 Q4 36 8 32 Z" fill="#44aa44"/>
                                            <path d="M12 36 Q14 34 16 36 L22 42 L44 20 Q46 18 48 20 Q50 22 48 24 L26 46 Q24 48 22 46 L12 40 Q10 38 12 36 Z" fill="#55bb55"/>
                                        </svg>
                                    </div>
                                    <span class="label">Bom</span>
                                </label>
                                <label class="rating-option">
                                    <input type="radio" name="geral" value="excelente">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <path d="M32 4 L36 20 L52 20 L40 30 L44 46 L32 36 L20 46 L24 30 L12 20 L28 20 Z" fill="#ffdd44"/>
                                            <path d="M32 8 L35 22 L48 22 L38 30 L41 44 L32 38 L23 44 L26 30 L16 22 L29 22 Z" fill="#ffee55"/>
                                        </svg>
                                    </div>
                                    <span class="label">Excelente</span>
                                </label>
                            </div>
                        </div>

                        <!-- Setor de Vendas -->
                        <div class="sector-card">
                            <h3 class="sector-title">Setor de Vendas</h3>
                            <div class="rating-options">
                                <label class="rating-option">
                                    <input type="radio" name="vendas" value="pessimo">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <circle cx="32" cy="32" r="30" fill="#ff4444"/>
                                            <circle cx="32" cy="32" r="28" fill="#ff5555"/>
                                            <path d="M20 20 Q24 16 28 20" stroke="#cc0000" stroke-width="3" fill="none"/>
                                            <path d="M36 20 Q40 16 44 20" stroke="#cc0000" stroke-width="3" fill="none"/>
                                            <path d="M20 44 Q32 36 44 44" stroke="#cc0000" stroke-width="3" fill="none"/>
                                            <circle cx="18" cy="18" r="4" fill="#ff6666"/>
                                            <circle cx="46" cy="18" r="4" fill="#ff6666"/>
                                        </svg>
                                    </div>
                                    <span class="label">P√©ssimo</span>
                                </label>
                                <label class="rating-option">
                                    <input type="radio" name="vendas" value="regular">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <circle cx="32" cy="32" r="30" fill="#ffaa00"/>
                                            <circle cx="32" cy="32" r="28" fill="#ffbb11"/>
                                            <path d="M20 20 Q24 16 28 20" stroke="#cc7700" stroke-width="2" fill="none"/>
                                            <path d="M36 20 Q40 16 44 20" stroke="#cc7700" stroke-width="2" fill="none"/>
                                            <path d="M22 40 L42 40" stroke="#cc7700" stroke-width="3" fill="none"/>
                                            <path d="M16 50 Q20 46 24 50" stroke="#dd8800" stroke-width="2" fill="none"/>
                                        </svg>
                                    </div>
                                    <span class="label">Regular</span>
                                </label>
                                <label class="rating-option">
                                    <input type="radio" name="vendas" value="bom">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <path d="M8 32 Q12 28 16 32 L24 40 L48 16 Q52 12 56 16 Q60 20 56 24 L28 52 Q24 56 20 52 L8 40 Q4 36 8 32 Z" fill="#44aa44"/>
                                            <path d="M12 36 Q14 34 16 36 L22 42 L44 20 Q46 18 48 20 Q50 22 48 24 L26 46 Q24 48 22 46 L12 40 Q10 38 12 36 Z" fill="#55bb55"/>
                                        </svg>
                                    </div>
                                    <span class="label">Bom</span>
                                </label>
                                <label class="rating-option">
                                    <input type="radio" name="vendas" value="excelente">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <path d="M32 4 L36 20 L52 20 L40 30 L44 46 L32 36 L20 46 L24 30 L12 20 L28 20 Z" fill="#ffdd44"/>
                                            <path d="M32 8 L35 22 L48 22 L38 30 L41 44 L32 38 L23 44 L26 30 L16 22 L29 22 Z" fill="#ffee55"/>
                                        </svg>
                                    </div>
                                    <span class="label">Excelente</span>
                                </label>
                            </div>
                        </div>

                        <!-- Setor de Caixa -->
                        <div class="sector-card">
                            <h3 class="sector-title">Setor de Caixa</h3>
                            <div class="rating-options">
                                <label class="rating-option">
                                    <input type="radio" name="caixa" value="pessimo">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <circle cx="32" cy="32" r="30" fill="#ff4444"/>
                                            <circle cx="32" cy="32" r="28" fill="#ff5555"/>
                                            <path d="M20 20 Q24 16 28 20" stroke="#cc0000" stroke-width="3" fill="none"/>
                                            <path d="M36 20 Q40 16 44 20" stroke="#cc0000" stroke-width="3" fill="none"/>
                                            <path d="M20 44 Q32 36 44 44" stroke="#cc0000" stroke-width="3" fill="none"/>
                                            <circle cx="18" cy="18" r="4" fill="#ff6666"/>
                                            <circle cx="46" cy="18" r="4" fill="#ff6666"/>
                                        </svg>
                                    </div>
                                    <span class="label">P√©ssimo</span>
                                </label>
                                <label class="rating-option">
                                    <input type="radio" name="caixa" value="regular">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <circle cx="32" cy="32" r="30" fill="#ffaa00"/>
                                            <circle cx="32" cy="32" r="28" fill="#ffbb11"/>
                                            <path d="M20 20 Q24 16 28 20" stroke="#cc7700" stroke-width="2" fill="none"/>
                                            <path d="M36 20 Q40 16 44 20" stroke="#cc7700" stroke-width="2" fill="none"/>
                                            <path d="M22 40 L42 40" stroke="#cc7700" stroke-width="3" fill="none"/>
                                            <path d="M16 50 Q20 46 24 50" stroke="#dd8800" stroke-width="2" fill="none"/>
                                        </svg>
                                    </div>
                                    <span class="label">Regular</span>
                                </label>
                                <label class="rating-option">
                                    <input type="radio" name="caixa" value="bom">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <path d="M8 32 Q12 28 16 32 L24 40 L48 16 Q52 12 56 16 Q60 20 56 24 L28 52 Q24 56 20 52 L8 40 Q4 36 8 32 Z" fill="#44aa44"/>
                                            <path d="M12 36 Q14 34 16 36 L22 42 L44 20 Q46 18 48 20 Q50 22 48 24 L26 46 Q24 48 22 46 L12 40 Q10 38 12 36 Z" fill="#55bb55"/>
                                        </svg>
                                    </div>
                                    <span class="label">Bom</span>
                                </label>
                                <label class="rating-option">
                                    <input type="radio" name="caixa" value="excelente">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <path d="M32 4 L36 20 L52 20 L40 30 L44 46 L32 36 L20 46 L24 30 L12 20 L28 20 Z" fill="#ffdd44"/>
                                            <path d="M32 8 L35 22 L48 22 L38 30 L41 44 L32 38 L23 44 L26 30 L16 22 L29 22 Z" fill="#ffee55"/>
                                        </svg>
                                    </div>
                                    <span class="label">Excelente</span>
                                </label>
                            </div>
                        </div>

                        <!-- Setor de Expedi√ß√£o -->
                        <div class="sector-card">
                            <h3 class="sector-title">Setor de Expedi√ß√£o</h3>
                            <div class="rating-options">
                                <label class="rating-option">
                                    <input type="radio" name="expedicao" value="pessimo">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <circle cx="32" cy="32" r="30" fill="#ff4444"/>
                                            <circle cx="32" cy="32" r="28" fill="#ff5555"/>
                                            <path d="M20 20 Q24 16 28 20" stroke="#cc0000" stroke-width="3" fill="none"/>
                                            <path d="M36 20 Q40 16 44 20" stroke="#cc0000" stroke-width="3" fill="none"/>
                                            <path d="M20 44 Q32 36 44 44" stroke="#cc0000" stroke-width="3" fill="none"/>
                                            <circle cx="18" cy="18" r="4" fill="#ff6666"/>
                                            <circle cx="46" cy="18" r="4" fill="#ff6666"/>
                                        </svg>
                                    </div>
                                    <span class="label">P√©ssimo</span>
                                </label>
                                <label class="rating-option">
                                    <input type="radio" name="expedicao" value="regular">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <circle cx="32" cy="32" r="30" fill="#ffaa00"/>
                                            <circle cx="32" cy="32" r="28" fill="#ffbb11"/>
                                            <path d="M20 20 Q24 16 28 20" stroke="#cc7700" stroke-width="2" fill="none"/>
                                            <path d="M36 20 Q40 16 44 20" stroke="#cc7700" stroke-width="2" fill="none"/>
                                            <path d="M22 40 L42 40" stroke="#cc7700" stroke-width="3" fill="none"/>
                                            <path d="M16 50 Q20 46 24 50" stroke="#dd8800" stroke-width="2" fill="none"/>
                                        </svg>
                                    </div>
                                    <span class="label">Regular</span>
                                </label>
                                <label class="rating-option">
                                    <input type="radio" name="expedicao" value="bom">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <path d="M8 32 Q12 28 16 32 L24 40 L48 16 Q52 12 56 16 Q60 20 56 24 L28 52 Q24 56 20 52 L8 40 Q4 36 8 32 Z" fill="#44aa44"/>
                                            <path d="M12 36 Q14 34 16 36 L22 42 L44 20 Q46 18 48 20 Q50 22 48 24 L26 46 Q24 48 22 46 L12 40 Q10 38 12 36 Z" fill="#55bb55"/>
                                        </svg>
                                    </div>
                                    <span class="label">Bom</span>
                                </label>
                                <label class="rating-option">
                                    <input type="radio" name="expedicao" value="excelente">
                                    <div class="icon-container">
                                        <svg class="rating-icon" viewBox="0 0 64 64" width="40" height="40">
                                            <path d="M32 4 L36 20 L52 20 L40 30 L44 46 L32 36 L20 46 L24 30 L12 20 L28 20 Z" fill="#ffdd44"/>
                                            <path d="M32 8 L35 22 L48 22 L38 30 L41 44 L32 38 L23 44 L26 30 L16 22 L29 22 Z" fill="#ffee55"/>
                                        </svg>
                                    </div>
                                    <span class="label">Excelente</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="submit-btn">
                            <span>‚úì</span> Confirmar Avalia√ß√£o
                        </button>
                    </div>
                </form>
            </section>

            <!-- Motivational Quote -->
            <section class="quote-section">
                <div class="quote-container">
                    <blockquote class="quote" id="motivationalQuote">
                        "A excel√™ncia n√£o √© um ato, mas um h√°bito."
                    </blockquote>
                    <button class="quote-btn" onclick="changeQuote()">
                        <span>üîÑ</span> Nova Frase
                    </button>
                </div>
            </section>
        </div>
    </main>

    <!-- Success Message -->
    <div class="success-message" id="successMessage">
        <div class="success-content">
            <span class="success-icon">‚úì</span>
            <p>Avalia√ß√£o enviada com sucesso!</p>
            <p>Obrigado pelo seu feedback.</p>
        </div>
    </div>

<style>/* Reset e Base */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', sans-serif;
    line-height: 1.6;
    color: #ffffff;
    background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0f0f0f 100%);
    min-height: 100vh;
    overflow-x: hidden;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

/* Header */
.header {
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    position: sticky;
    top: 0;
    z-index: 100;
}

.header .container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 20px;
}

.logo h1 {
    font-size: 2rem;
    font-weight: 700;
    background: linear-gradient(45deg, #ff0000, #ffffff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: 2px;
}

.logo .tagline {
    font-size: 0.8rem;
    color: #888;
    font-weight: 300;
}

.admin-btn {
    background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
    border: none;
    padding: 0.8rem 1.5rem;
    border-radius: 50px;
    color: white;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.admin-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
}

/* Main Content */
.main-content {
    padding: 2rem 0;
}

/* Hero Section */
.hero {
    text-align: center;
    padding: 4rem 0;
    background: radial-gradient(circle at center, rgba(255, 107, 107, 0.1) 0%, transparent 70%);
}

.hero-title {
    font-size: 3.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    background: linear-gradient(45deg, #ffffff, #cccccc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.hero-subtitle {
    font-size: 1.2rem;
    color: #aaa;
    font-weight: 300;
}

/* Quote Section */
.quote-section {
    padding: 3rem 0;
    text-align: center;
}

.quote-container {
    max-width: 600px;
    margin: 0 auto;
    padding: 2rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
}

.quote {
    font-size: 1.5rem;
    font-style: italic;
    color: #fff;
    margin-bottom: 1.5rem;
    font-weight: 300;
}

.quote-btn {
    background: linear-gradient(45deg, #ff6b6b, #ee5a24);
    border: none;
    padding: 0.8rem 1.5rem;
    border-radius: 50px;
    color: white;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.quote-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(255, 107, 107, 0.3);
}

/* Evaluation Section */
.evaluation-section {
    padding: 4rem 0;
}

.sectors-vertical {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    margin-bottom: 3rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
}

.sector-card {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 20px;
    padding: 2rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
}

.sector-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    border-color: rgba(255, 107, 107, 0.3);
}

.sector-title {
    font-size: 1.3rem;
    font-weight: 600;
    margin-bottom: 1.5rem;
    color: #fff;
    text-align: center;
}

.rating-options {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
}

.rating-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1rem;
    border-radius: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    background: rgba(255, 255, 255, 0.03);
}

.rating-option:hover {
    background: rgba(255, 255, 255, 0.08);
    transform: scale(1.05);
}

.rating-option input[type="radio"] {
    display: none;
}

.rating-option input[type="radio"]:checked + .icon-container .rating-icon {
    transform: scale(1.2);
}

.rating-option input[type="radio"]:checked ~ .label {
    color: #ff6b6b;
    font-weight: 600;
}

.rating-option:has(input[type="radio"]:checked) {
    border-color: #ff6b6b;
    background: rgba(255, 107, 107, 0.1);
}

.icon-container {
    margin-bottom: 0.5rem;
    transition: all 0.3s ease;
}

.rating-icon {
    transition: all 0.3s ease;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.label {
    font-size: 0.9rem;
    font-weight: 500;
    color: #ccc;
    transition: all 0.3s ease;
}

/* Form Actions */
.form-actions {
    text-align: center;
}

.submit-btn {
    background: linear-gradient(45deg, #00d2ff, #3a7bd5);
    border: none;
    padding: 1rem 3rem;
    border-radius: 50px;
    color: white;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.submit-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 35px rgba(0, 210, 255, 0.3);
}

.submit-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

/* Success Message */
.success-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(45deg, #00d2ff, #3a7bd5);
    padding: 2rem;
    border-radius: 20px;
    text-align: center;
    z-index: 2000;
    display: none;
    box-shadow: 0 25px 50px rgba(0, 210, 255, 0.3);
}

.success-message.show {
    display: block;
    animation: successPop 0.5s ease;
}

@keyframes successPop {
    0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
    100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}

.success-icon {
    font-size: 3rem;
    display: block;
    margin-bottom: 1rem;
}

.success-content p {
    margin: 0.5rem 0;
    font-weight: 500;
}

/* Responsive */
@media (max-width: 768px) {
    .hero-title {
        font-size: 2.5rem;
    }
    
    .rating-options {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.8rem;
    }
}

@media (max-width: 480px) {
    .rating-options {
        grid-template-columns: 1fr;
    }
    
    .logo h1 {
        font-size: 1.5rem;
    }
    
    .hero-title {
        font-size: 2rem;
    }
}
</style>

    <script>
        // ===== CONFIGURA√á√ïES DO BANCO DE DADOS =====
        const DB_NAME = 'TelecimentoDB';
        const DB_VERSION = 1;
        const STORE_NAME = 'evaluations';
        const STORAGE_KEY = 'telecimento_evaluations';

        // ===== CLASSE PARA GERENCIAR O BANCO DE DADOS =====
        class TelecimentoDatabase {
            constructor() {
                this.db = null;
                this.isReady = false;
                this.initPromise = this.initDatabase();
            }

            async initDatabase() {
                return new Promise((resolve, reject) => {
                    if (!window.indexedDB) {
                        console.warn('IndexedDB n√£o suportado, usando apenas localStorage');
                        this.isReady = true;
                        resolve();
                        return;
                    }

                    const request = indexedDB.open(DB_NAME, DB_VERSION);

                    request.onerror = () => {
                        console.error('Erro ao abrir banco de dados:', request.error);
                        this.isReady = true;
                        resolve(); // Continua sem IndexedDB
                    };

                    request.onsuccess = (event) => {
                        this.db = event.target.result;
                        this.isReady = true;
                        console.log('Banco de dados inicializado com sucesso');
                        resolve();
                    };

                    request.onupgradeneeded = (event) => {
                        const db = event.target.result;
                        
                        // Criar object store se n√£o existir
                        if (!db.objectStoreNames.contains(STORE_NAME)) {
                            const store = db.createObjectStore(STORE_NAME, { keyPath: 'id' });
                            store.createIndex('timestamp', 'timestamp', { unique: false });
                            store.createIndex('geral', 'geral', { unique: false });
                            store.createIndex('vendas', 'vendas', { unique: false });
                            store.createIndex('caixa', 'caixa', { unique: false });
                            store.createIndex('expedicao', 'expedicao', { unique: false });
                            console.log('Object store criado');
                        }
                    };
                });
            }

            async saveEvaluation(evaluation) {
                await this.initPromise;

                // Salvar no localStorage como backup
                this.saveToLocalStorage(evaluation);

                // Tentar salvar no IndexedDB
                if (this.db) {
                    return new Promise((resolve, reject) => {
                        const transaction = this.db.transaction([STORE_NAME], 'readwrite');
                        const store = transaction.objectStore(STORE_NAME);
                        const request = store.add(evaluation);

                        request.onsuccess = () => {
                            console.log('Avalia√ß√£o salva no IndexedDB:', evaluation.id);
                            resolve(evaluation);
                        };

                        request.onerror = () => {
                            console.error('Erro ao salvar no IndexedDB:', request.error);
                            resolve(evaluation); // Continua com localStorage
                        };
                    });
                } else {
                    console.log('Avalia√ß√£o salva apenas no localStorage');
                    return Promise.resolve(evaluation);
                }
            }

            saveToLocalStorage(evaluation) {
                try {
                    let evaluations = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
                    evaluations.push(evaluation);
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(evaluations));
                    
                    // Backup no sessionStorage
                    sessionStorage.setItem(STORAGE_KEY + '_backup', JSON.stringify(evaluations));
                } catch (error) {
                    console.error('Erro ao salvar no localStorage:', error);
                }
            }

            async getAllEvaluations() {
                await this.initPromise;

                if (this.db) {
                    return new Promise((resolve, reject) => {
                        const transaction = this.db.transaction([STORE_NAME], 'readonly');
                        const store = transaction.objectStore(STORE_NAME);
                        const request = store.getAll();

                        request.onsuccess = () => {
                            const evaluations = request.result || [];
                            console.log(`Carregadas ${evaluations.length} avalia√ß√µes do IndexedDB`);
                            resolve(evaluations);
                        };

                        request.onerror = () => {
                            console.error('Erro ao carregar do IndexedDB:', request.error);
                            // Fallback para localStorage
                            resolve(this.getFromLocalStorage());
                        };
                    });
                } else {
                    return this.getFromLocalStorage();
                }
            }

            getFromLocalStorage() {
                try {
                    const stored = localStorage.getItem(STORAGE_KEY);
                    if (stored) {
                        const evaluations = JSON.parse(stored);
                        console.log(`Carregadas ${evaluations.length} avalia√ß√µes do localStorage`);
                        return evaluations;
                    }
                    
                    // Tentar backup do sessionStorage
                    const backup = sessionStorage.getItem(STORAGE_KEY + '_backup');
                    if (backup) {
                        const evaluations = JSON.parse(backup);
                        console.log(`Carregadas ${evaluations.length} avalia√ß√µes do sessionStorage backup`);
                        // Restaurar no localStorage
                        localStorage.setItem(STORAGE_KEY, backup);
                        return evaluations;
                    }
                    
                    return [];
                } catch (error) {
                    console.error('Erro ao carregar do localStorage:', error);
                    return [];
                }
            }

            async clearAllData() {
                await this.initPromise;

                // Limpar localStorage
                localStorage.removeItem(STORAGE_KEY);
                sessionStorage.removeItem(STORAGE_KEY + '_backup');

                // Limpar IndexedDB
                if (this.db) {
                    return new Promise((resolve, reject) => {
                        const transaction = this.db.transaction([STORE_NAME], 'readwrite');
                        const store = transaction.objectStore(STORE_NAME);
                        const request = store.clear();

                        request.onsuccess = () => {
                            console.log('Todos os dados foram limpos do IndexedDB');
                            resolve();
                        };

                        request.onerror = () => {
                            console.error('Erro ao limpar IndexedDB:', request.error);
                            resolve(); // Continua mesmo com erro
                        };
                    });
                } else {
                    console.log('Dados limpos apenas do localStorage');
                    return Promise.resolve();
                }
            }

            async getStatistics() {
                const evaluations = await this.getAllEvaluations();
                
                if (evaluations.length === 0) {
                    return {
                        total: 0,
                        average: 0,
                        sectors: {
                            geral: { pessimo: 0, regular: 0, bom: 0, excelente: 0 },
                            vendas: { pessimo: 0, regular: 0, bom: 0, excelente: 0 },
                            caixa: { pessimo: 0, regular: 0, bom: 0, excelente: 0 },
                            expedicao: { pessimo: 0, regular: 0, bom: 0, excelente: 0 }
                        }
                    };
                }

                const ratingValues = { 'pessimo': 1, 'regular': 2, 'bom': 3, 'excelente': 4 };
                let totalScore = 0;
                let totalRatings = 0;

                const sectors = {
                    geral: { pessimo: 0, regular: 0, bom: 0, excelente: 0 },
                    vendas: { pessimo: 0, regular: 0, bom: 0, excelente: 0 },
                    caixa: { pessimo: 0, regular: 0, bom: 0, excelente: 0 },
                    expedicao: { pessimo: 0, regular: 0, bom: 0, excelente: 0 }
                };

                evaluations.forEach(evaluation => {
                    ['geral', 'vendas', 'caixa', 'expedicao'].forEach(sector => {
                        const rating = evaluation[sector];
                        if (rating && sectors[sector][rating] !== undefined) {
                            sectors[sector][rating]++;
                            totalScore += ratingValues[rating];
                            totalRatings++;
                        }
                    });
                });

                const average = totalRatings > 0 ? totalScore / totalRatings : 0;

                return {
                    total: evaluations.length,
                    average: average,
                    sectors: sectors,
                    evaluations: evaluations
                };
            }
        }

        // ===== INST√ÇNCIA GLOBAL DO BANCO DE DADOS =====
        const database = new TelecimentoDatabase();

        // ===== FRASES MOTIVACIONAIS =====
        const motivationalQuotes = [
            "A excel√™ncia n√£o √© um ato, mas um h√°bito.",
            "O sucesso √© a soma de pequenos esfor√ßos repetidos dia ap√≥s dia.",
            "A qualidade nunca √© um acidente; √© sempre o resultado de um esfor√ßo inteligente.",
            "Grandes coisas nunca v√™m de zonas de conforto.",
            "O cliente √© a raz√£o de existirmos como empresa.",
            "A satisfa√ß√£o do cliente √© nossa maior conquista.",
            "Cada feedback √© uma oportunidade de crescimento.",
            "A excel√™ncia no atendimento √© nosso compromisso di√°rio.",
            "Juntos constru√≠mos um futuro melhor.",
            "Sua opini√£o nos torna mais fortes.",
            "A inova√ß√£o nasce da escuta atenta aos nossos clientes.",
            "Qualidade √© fazer certo quando ningu√©m est√° olhando.",
            "O trabalho em equipe √© o combust√≠vel que permite pessoas comuns alcan√ßarem resultados incomuns.",
            "A persist√™ncia √© o caminho do √™xito.",
            "Nosso compromisso √© superar suas expectativas."
        ];

        // ===== ESTADO DA APLICA√á√ÉO =====
        let currentQuoteIndex = 0;

        // ===== INICIALIZA√á√ÉO =====
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        async function initializeApp() {
            displayRandomQuote();
            setupEventListeners();
            
            // Aguardar inicializa√ß√£o do banco de dados
            await database.initPromise;
            console.log('Aplica√ß√£o inicializada com sucesso');
        }

        function setupEventListeners() {
            // Form submission
            document.getElementById('evaluationForm').addEventListener('submit', handleFormSubmission);
        }

        // ===== FRASES MOTIVACIONAIS =====
        function displayRandomQuote() {
            const quoteElement = document.getElementById('motivationalQuote');
            const randomIndex = Math.floor(Math.random() * motivationalQuotes.length);
            currentQuoteIndex = randomIndex;
            
            quoteElement.style.opacity = '0';
            setTimeout(() => {
                quoteElement.textContent = motivationalQuotes[randomIndex];
                quoteElement.style.opacity = '1';
            }, 300);
        }

        function changeQuote() {
            displayRandomQuote();
        }

        // ===== SISTEMA DE AVALIA√á√ÉO =====
        async function handleFormSubmission(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const evaluation = {
                id: Date.now() + Math.random(), // ID √∫nico
                timestamp: new Date().toISOString(),
                geral: formData.get('geral'),
                vendas: formData.get('vendas'),
                caixa: formData.get('caixa'),
                expedicao: formData.get('expedicao'),
                userAgent: navigator.userAgent,
                sessionId: generateSessionId()
            };
            
            // Validar se todos os campos foram preenchidos
            if (!evaluation.geral || !evaluation.vendas || !evaluation.caixa || !evaluation.expedicao) {
                alert('Por favor, avalie todos os setores antes de enviar.');
                return;
            }
            
            try {
                // Desabilitar bot√£o durante o salvamento
                const submitBtn = e.target.querySelector('.submit-btn');
                submitBtn.disabled = true;
                submitBtn.textContent = 'Salvando...';
                
                // Salvar avalia√ß√£o no banco de dados
                await database.saveEvaluation(evaluation);
                
                // Mostrar mensagem de sucesso
                showSuccessMessage();
                
                // Resetar formul√°rio
                e.target.reset();
                
                // Mostrar nova frase motivacional
                setTimeout(() => {
                    displayRandomQuote();
                }, 2000);
                
                console.log('Avalia√ß√£o salva com sucesso:', evaluation.id);
                
            } catch (error) {
                console.error('Erro ao salvar avalia√ß√£o:', error);
                alert('Erro ao salvar avalia√ß√£o. Tente novamente.');
            } finally {
                // Reabilitar bot√£o
                const submitBtn = e.target.querySelector('.submit-btn');
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<span>‚úì</span> Confirmar Avalia√ß√£o';
            }
        }

        function generateSessionId() {
            return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function showSuccessMessage() {
            const successMessage = document.getElementById('successMessage');
            successMessage.classList.add('show');
            
            setTimeout(() => {
                successMessage.classList.remove('show');
            }, 3000);
        }

        // ===== FUN√á√ÉO PARA ABRIR P√ÅGINA ADMINISTRATIVA =====
        function openAdminPage() {
            window.open('admin_database.html', '_blank');
        }

        // ===== FUN√á√ïES DE DEBUG (remover em produ√ß√£o) =====
        async function addTestData() {
            const testEvaluations = [
                { id: Date.now() + 1, timestamp: new Date().toISOString(), geral: 'bom', vendas: 'excelente', caixa: 'bom', expedicao: 'regular', userAgent: 'test', sessionId: 'test1' },
                { id: Date.now() + 2, timestamp: new Date().toISOString(), geral: 'excelente', vendas: 'bom', caixa: 'excelente', expedicao: 'bom', userAgent: 'test', sessionId: 'test2' },
                { id: Date.now() + 3, timestamp: new Date().toISOString(), geral: 'regular', vendas: 'bom', caixa: 'regular', expedicao: 'pessimo', userAgent: 'test', sessionId: 'test3' },
                { id: Date.now() + 4, timestamp: new Date().toISOString(), geral: 'bom', vendas: 'regular', caixa: 'bom', expedicao: 'excelente', userAgent: 'test', sessionId: 'test4' },
                { id: Date.now() + 5, timestamp: new Date().toISOString(), geral: 'excelente', vendas: 'excelente', caixa: 'bom', expedicao: 'bom', userAgent: 'test', sessionId: 'test5' }
            ];
            
            for (const evaluation of testEvaluations) {
                await database.saveEvaluation(evaluation);
            }
            
            console.log('Dados de teste adicionados!');
        }

        async function showStats() {
            const stats = await database.getStatistics();
            console.log('Estat√≠sticas:', stats);
        }

        // Descomente as linhas abaixo para adicionar dados de teste
        // window.addTestData = addTestData;
        // window.showStats = showStats;
        // window.database = database;
    </script>
</body>
</html>

